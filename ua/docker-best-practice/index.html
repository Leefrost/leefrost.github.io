<!doctype html><html lang=ua><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>7 практик щоб працювати з Docker на повну - CodeStory</title><meta name=Description content="Корисні поради для роботи з Docker"><meta property="og:title" content="7 практик щоб працювати з Docker на повну"><meta property="og:description" content="Корисні поради для роботи з Docker"><meta property="og:type" content="article"><meta property="og:url" content="https://codestory.me/ua/docker-best-practice/"><meta property="og:image" content="https://codestory.me/ua/docker-best-practice/featured-image.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-03-12T00:00:00+00:00"><meta property="article:modified_time" content="2023-03-12T00:00:00+00:00"><meta property="og:site_name" content="CodeStory"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://codestory.me/ua/docker-best-practice/featured-image.png"><meta name=twitter:title content="7 практик щоб працювати з Docker на повну"><meta name=twitter:description content="Корисні поради для роботи з Docker"><meta name=application-name content="CodeStory"><meta name=apple-mobile-web-app-title content="CodeStory"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://codestory.me/ua/docker-best-practice/><link rel=next href=https://codestory.me/ua/content-delivery-network/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"7 практик щоб працювати з Docker на повну","inLanguage":"ua","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/codestory.me\/ua\/docker-best-practice\/"},"image":[{"@type":"ImageObject","url":"https:\/\/codestory.me\/ua\/docker-best-practice\/featured-image.png","width":1560,"height":760}],"genre":"posts","keywords":"докер, контейнеризація","wordcount":696,"url":"https:\/\/codestory.me\/ua\/docker-best-practice\/","datePublished":"2023-03-12T00:00:00+00:00","dateModified":"2023-03-12T00:00:00+00:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"xxxx","logo":{"@type":"ImageObject","url":"https:\/\/codestory.me\/images\/avatar.png","width":528,"height":560}},"author":{"@type":"Person","name":"Сергій Ліщук"},"description":"Корисні поради для роботи з Docker"}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ua/ title=CodeStory>CodeStory</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/ua/posts/>Пости </a><a class=menu-item href=/ua/tags/>Теги </a><a class=menu-item href=/ua/categories/>Категорії </a><a class=menu-item href=/ua/about/>Автор </a><a class=menu-item href=https://github.com/Leefrost title=GitHub rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw' aria-hidden=true></i> </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="menu-item language" title="Select Language"><i class="fa fa-globe" aria-hidden=true></i>
<select class=language-select id=language-select-desktop onchange="location=this.value"><option value=/docker-best-practice/>English</option><option value=/ua/docker-best-practice/ selected>Українська</option></select></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ua/ title=CodeStory>CodeStory</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/ua/posts/ title>Пости</a><a class=menu-item href=/ua/tags/ title>Теги</a><a class=menu-item href=/ua/categories/ title>Категорії</a><a class=menu-item href=/ua/about/ title>Автор</a><a class=menu-item href=https://github.com/Leefrost title=GitHub rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw' aria-hidden=true></i></a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class=menu-item title="Select Language"><i class="fa fa-globe fa-fw" aria-hidden=true></i>
<select class=language-select onchange="location=this.value"><option value=/docker-best-practice/>English</option><option value=/ua/docker-best-practice/ selected>Українська</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">7 практик щоб працювати з Docker на повну</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://codestory.me title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Сергій Ліщук</a></span>&nbsp;<span class=post-category>included in <a href=/ua/categories/%D1%80%D0%BE%D0%B7%D0%B3%D0%BE%D1%80%D1%82%D0%B0%D0%BD%D0%BD%D1%8F/><i class="far fa-folder fa-fw" aria-hidden=true></i>Розгортання</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2023-03-12>2023-03-12</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;696 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;4 minutes&nbsp;</div></div><div class=featured-image><img class=lazyload src=/svg/loading.min.svg data-src=/ua/docker-best-practice/featured-image.png data-srcset="/ua/docker-best-practice/featured-image.png, /ua/docker-best-practice/featured-image.png 1.5x, /ua/docker-best-practice/featured-image.png 2x" data-sizes=auto alt=/ua/docker-best-practice/featured-image.png title="Корисні поради для роботи з Docker"></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#7-корисних-практик-при-роботі-з-docker-контейнерами>7 корисних практик при роботі з Docker контейнерами</a><ul><li><a href=#1-один-контейнер---одна-програма>1. Один контейнер - одна програма</a></li><li><a href=#2-правильно-обробляйте-pid-1-сигнали-та-зомбі-процеси>2. Правильно обробляйте PID 1, сигнали та зомбі процеси</a></li><li><a href=#3-використовуйте-правильно-кеш-збірки-у-docker>3. Використовуйте правильно кеш збірки у Docker</a></li><li><a href=#4-видаляйте-непотрібні-залежності>4. Видаляйте непотрібні залежності</a></li><li><a href=#5-проектуйте-та-створюйте-наймешн-можливу-збірку>5. Проектуйте та створюйте наймешн можливу збірку</a></li><li><a href=#6-правильно-позначайте-свої-збірки>6. Правильно позначайте свої збірки</a></li><li><a href=#7-уважно-подумайте-чи-варто-використовувати-публічні-збірки>7. Уважно подумайте, чи варто використовувати публічні збірки</a></li></ul></li></ul></nav></div></div><div class=content id=content><p>Програмування - це завжди шлях еволюції. Власне еволюція сучасних рішень розробки (мов, оточення, тощо) принесла чимало нових підходів та вимог - важко уявити сучасне програмування без високорівневих фреймворків, контейнерів, хмарного обчислення чи спеціальних дата сховищ. Хочу поділитись кількома практичними порадами саме для роботи з контейнерами та контейнеризацією, зокрема щодо Docker та його контейнерів.</p><h2 id=7-корисних-практик-при-роботі-з-docker-контейнерами>7 корисних практик при роботі з Docker контейнерами</h2><p>Kubernetes Engine — це чудове місце для запуску ваших робочих процесів у масштабі. Але перш ніж використовувати Kubernetes, вам потрібно контейнеризувати свої програми. Ви можете запускати більшість програм у контейнері Docker без зайвих клопотів. Однак ефективне використання цих контейнерів на практиці та оптимізація процесу збирання контейнеру — це уже зовсім інші речі. Слід звернути увагу на ряд особливостей, які зроблять ваші команди розробників і тестувальників щасливими. Ця публікація містить поради та найкращі практики, які допоможуть вам ефективно створювати контейнери.</p><h3 id=1-один-контейнер---одна-програма>1. Один контейнер - одна програма</h3><p>Контейнер працює найкраще, коли в ньому працює лише одна програма. Ця програма повинна мати єдиний батьківський процес - завершення якого приведе до зупинки контейнера. Це дуже корисно. Не запускайте PHP і MySQL в одному контейнері: це важче налагоджувати, сигнали Linux не оброблятимуться належним чином, ви не можете горизонтально масштабувати контейнери PHP тощо.</p><h3 id=2-правильно-обробляйте-pid-1-сигнали-та-зомбі-процеси>2. Правильно обробляйте PID 1, сигнали та зомбі процеси</h3><p>Kubernetes і Docker надсилають сигнали Linux вашій програмі всередині контейнера, щоб зупинити її. Вони надсилають ці сигнали процесу з ідентифікатором (PID) 1. Якщо ви хочете, щоб ваша програма зупинялася правильно і коли це необхідно, вам потрібно правильно обробляти вхідні сигнали.</p><h3 id=3-використовуйте-правильно-кеш-збірки-у-docker>3. Використовуйте правильно кеш збірки у Docker</h3><p>Docker може кешувати рівні ваших збірок, щоб прискорити повторні збірки. Це дуже корисна функція, але вона має певні особливості поведінки, які потрібно враховувати під час написання файлів Docker. Наприклад, ви повинні додати код вашої програми якомога пізніше у Dockerfile, щоб базова збірка та залежності вашої програми кешувалися й не перебудовувалися під час кожної збірки.</p><p>Наприклад:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-docker data-lang=docker><span class=line><span class=cl><span class=k>FROM</span><span class=s> python:3.5</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> my_code src<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> pip install my_requirements<span class=err>
</span></span></span></code></pre></td></tr></table></div></div><p>Вам варто змінити наступні стрічки коду:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-docker data-lang=docker><span class=line><span class=cl><span class=k>FROM</span><span class=s> python:3.5</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> pip install my_requirements<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> my_code src<span class=err>
</span></span></span></code></pre></td></tr></table></div></div><p>У новій версії результати роботи команди pip будуть закешовані для подальших збірок.</p><h3 id=4-видаляйте-непотрібні-залежності>4. Видаляйте непотрібні залежності</h3><p>Зменшення поверхні для атак вашої хост-системи завжди є хорошою ідеєю, і це набагато легше зробити з контейнерами, ніж із традиційними системами. Видаліть усе, що програмі не потрібно зі свого контейнера. Або, ще краще, додайте лише свою програму до збірки без дистрибутива або іншої початкової збірки. Ви також повинні, якщо можливо, зробити файлову систему контейнера доступною лише для читання. Це забезпечить Вам найкращу безпеку разом з продуктивністю вашої програми</p><h3 id=5-проектуйте-та-створюйте-наймешн-можливу-збірку>5. Проектуйте та створюйте наймешн можливу збірку</h3><p>Хто любить завантажувати сотні мегабайт непотрібних даних? Завжди тримайте одним з найкращих показників - розмір збірки - на максимально низькому рівні. Це зменшує час завантаження, час холодного запуску та використання диска. Ви можете використати кілька стратегій, щоб досягти цього: почати з мінімальної базової збірки, використати загальні рівні між збірками та не забувайте про багатоетапну збірку у Docker.</p><h3 id=6-правильно-позначайте-свої-збірки>6. Правильно позначайте свої збірки</h3><p>Теги – це те, як користувачі вибирають, яку версію вашої збірки вони хочуть використовувати. Існує два основних способи позначення тегами: семантичне керування версіями або використання хешу фіксації Git вашої програми. Незалежно від того, який ви виберете, документуйте це та чітко визначте очікування, які мають мати користувачі зібрки. Будьте обережні: хоча користувачі очікують, що деякі теги, як-от тег &ldquo;latest&rdquo;, будуть мігрувати з однієї збірки на іншу, а також, що інші теги будуть залишатись незмінними, навіть якщо технічно це не так. Наприклад, після того, як ви позначили певну версію своєї збірки тегом «1.2.3», ви ніколи не повинні переміщувати цей тег на інші збірки.</p><h3 id=7-уважно-подумайте-чи-варто-використовувати-публічні-збірки>7. Уважно подумайте, чи варто використовувати публічні збірки</h3><p>Використання загальнодоступних збірок може бути чудовим способом почати роботу з певним програмним забезпеченням. Однак їх використання у під час релізу чи тестування може спричинити ряд проблем, особливо в середовищі з високими обмеженнями. Можливо, вам знадобиться контролювати те, що в них знаходиться, або ви можете не залежати від зовнішнього сховища, наприклад. З іншого боку, створення власних збірок для кожної частини програмного забезпечення, яке ви використовуєте, не є тривіальним, особливо тому, що вам потрібно йти в ногу з оновленнями безпеки попереднього програмного забезпечення. Ретельно зважте плюси та мінуси кожного для конкретного випадку використання та прийміть свідоме рішення.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2023-03-12</span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/ua/docker-best-practice/index.md target=_blank>Read Markdown</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://codestory.me/ua/docker-best-practice/ data-title="7 практик щоб працювати з Docker на повну" data-via=Leefrost_ data-hashtags=докер,контейнеризація><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://codestory.me/ua/docker-best-practice/ data-hashtag=докер><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://codestory.me/ua/docker-best-practice/><i class="fab fa-linkedin fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/ua/tags/%D0%B4%D0%BE%D0%BA%D0%B5%D1%80/>докер</a>,&nbsp;<a href=/ua/tags/%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80%D0%B8%D0%B7%D0%B0%D1%86%D1%96%D1%8F/>контейнеризація</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/ua/>Home</a></span></section></div><div class=post-nav><a href=/ua/content-delivery-network/ class=next rel=next title="Мережа доставки (і розповсюдження) контенту (CDN)">Мережа доставки (і розповсюдження) контенту (CDN)<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.101.0">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ua/ target=_blank>Sergii Lischuk</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/algoliasearch@4.13.1/dist/algoliasearch-lite.umd.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{},lightgallery:!0,search:{algoliaAppID:"1PCGRLPBQI",algoliaIndex:"index.ua",algoliaSearchKey:"7cab16713abb6b1606054ed6362a0584",highlightTag:"em",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"algolia"}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>