---
weight: 1
title: "Мережа доставки (і розповсюдження) контенту (CDN)"
date: 2022-09-16T19:22:16.915Z
lastmod: 2022-09-16T19:22:16.915Z
draft: false
author: "Сергій Ліщук"
authorLink: "https://codestory.me"
description: "Коротко про CDN"
images: []
resources:
- name: "featured-image"
  src: "featured-image.png"
tags: ["system-design"]
categories: ["Архітектура"]
twemoji: false
lightgallery: true
---

Мережа доставки (і розповсюдження) контенту (CDN) — це територіально розподілена група серверів, які працюють разом, щоб забезпечити швидку доставку Інтернет-вмісту. Як правило, статичні файли, такі як HTML/CSS/JS, фотографії та відео, розповсюджуються саме з CDN.

<!--more-->

## Як це працює?

У CDN вихідний сервер містить оригінальні версії вмісту, тоді як периферійних серверів багато і вони розподілені в різних місцях по всьому світу.

Щоб мінімізувати відстань між відвідувачами та сервером веб-сайту, CDN зберігає кешовану версію свого вмісту в кількох географічних локаціях, відомих як периферійні сервери. Кожна переферійна локація містить кілька серверів кешування, відповідальних за доставку вмісту відвідувачам у безпосередній близькості від нього.

Після того, як статичні активи будуть кешовані на всіх серверах CDN для певного розташування, усі наступні запити відвідувачів веб-сайту на статичні активи будуть доставлені з цих периферійних серверів замість джерела, таким чином зменшуючи навантаження на джерело та покращуючи масштабованість.

Наприклад, коли хтось у Великій Британії надсилає запит на наш веб-сайт, який може бути розміщений у США, він обслуговуватиметься з найближчої локації, наприклад, із Лондона. Це набагато швидше, ніж коли відвідувач робить повний запит на вихідний сервер, що збільшує затримку.

## Типи CDN

Загалом CDN ділиться на 2 підвиди:

### Push CDNs

Push CDN отримують новий вміст щоразу, коли відбуваються зміни на сервері. Ми беремо повну відповідальність за надання вмісту, завантаження безпосередньо в CDN і зміну URL-адреси, щоб вони вказували на CDN. Ми можемо налаштувати термін дії вмісту та його оновлення. Вміст завантажується лише тоді, коли він новий або змінений, мінімізуючи трафік, але максимізуючи пам’ять.

Сайти з невеликим обсягом трафіку або сайти з вмістом, який не часто оновлюється, добре працюють із push CDN. Вміст розміщується на CDN один раз, замість того, щоб повторно витягуватися через регулярні проміжки часу.

### Pull CDNs

У ситуації Pull CDN кеш оновлюється на основі запиту. Коли клієнт надсилає запит, який вимагає отримання статичних ресурсів із CDN, якщо CDN їх не має, він отримує нещодавно оновлені ресурси з початкового сервера та заповнює свій кеш цим новим ресурсом, а потім надсилає це новий кешований ресурс для користувача.

На відміну від Push CDN, це вимагає менше обслуговування, оскільки оновлення кешу на вузлах CDN виконуються на основі запитів від клієнта до початкового сервера. Сайти з інтенсивним трафіком добре працюють із CDN за запитом, оскільки трафік розподіляється більш рівномірно, а на CDN залишається лише нещодавно запитуваний вміст.

## Недоліки

Як ми всі знаємо, хороші речі пов’язані з додатковими витратами, тому давайте обговоримо деякі недоліки CDN:

- Додаткова плата: використання CDN може бути дорогим, особливо для послуг із високим трафіком.
- Обмеження: деякі організації та країни заблокували домени або IP-адреси популярних CDN.
- Розташування: якщо більша частина нашої аудиторії знаходиться в країні, де CDN не має серверів, дані на нашому веб-сайті можуть переміщатися далі, ніж без CDN.

## Приклади

Найбільш відомі провайдери CDN:

- Amazon CloudFront
- Google Cloud CDN
- Cloudflare CDN
- Fastly